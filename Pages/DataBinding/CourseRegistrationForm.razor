@page "/CourseRegistrationForm"
@layout HomeLayout

<EditForm Model="@course" OnValidSubmit="handleSubmit" class="w-50 mx-auto">
    <DataAnnotationsValidator />

    <h3 class="text-center">Course Registration Form</h3>

    <div class="form-group">
        <label>Full Name:</label>
        <input class="form-control" @bind="course.FullName" type="text" placeholder="Enter Full Name" />
        <ValidationMessage For="@(() => course.FullName)" class="text-danger" />
    </div>

    <div class="form-group">
        <label>Email:</label>
        <input class="form-control" @bind="course.Email" type="email" placeholder="Enter Email" />
        <ValidationMessage For="@(() => course.Email)" class="text-danger" />
    </div>

    <div class="form-group">
        <label>Phone Number:</label>
        <input class="form-control" @bind="course.PhoneNumber" type="text" placeholder="Enter Phone Number" />
        <ValidationMessage For="@(() => course.PhoneNumber)" class="text-danger" />
    </div>

    <div class="form-group">
        <label>Course:</label>
        <select class="form-control" @bind="course.CourseName">
            <option value="">Choose...</option>
            @foreach (var item in CourseService.lstCourse)
            {
                <option value="@item">@item</option>
            }
        </select>
        <ValidationMessage For="@(() => course.CourseName)" class="text-danger" />
    </div>

    <div class="form-group">
        <label>Study Mode:</label><br />
        <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" id="online" name="studyMode"
                @onchange="() => changeStudyMode(true)" checked value="true" />
            <label class="form-check-label" for="online">Online</label>
        </div>
        <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" id="offline" name="studyMode"
                @onchange="() => changeStudyMode(false)" value="false" />
            <label class="form-check-label" for="offline">Offline</label>
        </div>
        <ValidationMessage For="@(() => course.StudyMode)" class="text-danger" />
    </div>

    <div class="form-group">
        <label>Preferred Start Date:</label>
        <input class="form-control" type="date" @bind="course.StartDate" />
        <ValidationMessage For="@(() => course.StartDate)" class="text-danger" />
    </div>

    <div class="form-group">
        <label>Comments or Notes:</label>
        <textarea class="form-control" @bind="course.Comments" placeholder="Enter any additional information"
            rows="4"></textarea>
        <ValidationMessage For="@(() => course.Comments)" class="text-danger" />
    </div>

    <div class="form-group form-check">
        <input type="checkbox" class="form-check-input" id="agreeCheck" @bind="course.Agree" />
        <label class="form-check-label" for="agreeCheck">I agree to the terms and conditions</label>
        <ValidationMessage For="@(() => course.Agree)" class="text-danger" />
    </div>

    <div class="form-group mt-3 text-center">
        <button class="btn btn-success w-100" type="submit">Submit</button>
    </div>
</EditForm>

@code {
    public Course course = new Course();

    public void handleSubmit()
    {
        Console.WriteLine("Submitted!");
        Console.WriteLine($"StudyMode: {(course.StudyMode == true ? "Online" : "Offline")}");
        Console.WriteLine(JsonSerializer.Serialize(course));
    }

    public void changeStudyMode(bool value)
    {
        course.StudyMode = value;
    }
}
